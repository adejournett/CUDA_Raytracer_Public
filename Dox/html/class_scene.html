<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CUDA_BSSRDF_Raytracer: Scene Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CUDA_BSSRDF_Raytracer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_scene-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Scene Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="scene_8h_source.html">scene.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a81528c87df5d4f3ba6d9625643bf9685"><td class="memItemLeft" align="right" valign="top">__device__&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a81528c87df5d4f3ba6d9625643bf9685">Scene</a> (<a class="el" href="class_light.html">Light</a> *l, int nl, <a class="el" href="class_camera.html">Camera</a> *<a class="el" href="glad_8h.html#a1f2d7f8147412c43ba2303a56f97ee73">c</a>, <a class="el" href="class_surfel.html">Surfel</a> *<a class="el" href="glad_8h.html#a4af680a6c683f88ed67b76f207f2e6e4">s</a>, <a class="el" href="class_s_a_h_g_p_u_node.html">SAHGPUNode</a> *<a class="el" href="glad_8h.html#a7d65d00ca3b0630d9b5c52df855b19f5">t</a>, <a class="el" href="class_a_a_b_b.html">AABB</a> *<a class="el" href="glad_8h.html#a0f71581a41fd2264c8944126dabbd010">b</a>, Rope *<a class="el" href="glad_8h.html#a42ce7cdc612e53abee15043f80220d97">r</a>, int sz, int ns)</td></tr>
<tr class="separator:a81528c87df5d4f3ba6d9625643bf9685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f1a46bda4ed8be9416308dd94288309"><td class="memItemLeft" align="right" valign="top">__device__ bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a8f1a46bda4ed8be9416308dd94288309">lineOfSight</a> (const <a class="el" href="class_ray.html">Ray</a> &amp;toLight, float lightT)</td></tr>
<tr class="separator:a8f1a46bda4ed8be9416308dd94288309"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee8a768beef00984e19ce82b46298f1"><td class="memItemLeft" align="right" valign="top">__device__ bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a2ee8a768beef00984e19ce82b46298f1">intersectTree</a> (<a class="el" href="class_hit_rec.html">HitRec</a> &amp;rec, const <a class="el" href="class_ray.html">Ray</a> &amp;<a class="el" href="glad_8h.html#a42ce7cdc612e53abee15043f80220d97">r</a>, <a class="el" href="class_surfel.html">Surfel</a> &amp;surf, float t_entry, float t_exit, bool isFrame)</td></tr>
<tr class="separator:a2ee8a768beef00984e19ce82b46298f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a9dc89f9d14a78b3449d8b00d1ac5752a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_light.html">Light</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a9dc89f9d14a78b3449d8b00d1ac5752a">lights</a></td></tr>
<tr class="separator:a9dc89f9d14a78b3449d8b00d1ac5752a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbea41c68710d455664007e28d502980"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_surfel.html">Surfel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#adbea41c68710d455664007e28d502980">surfels</a></td></tr>
<tr class="separator:adbea41c68710d455664007e28d502980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a834b9529f28b15ebe6dafadd97afaa88"><td class="memItemLeft" align="right" valign="top">Rope *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a834b9529f28b15ebe6dafadd97afaa88">ropes</a></td></tr>
<tr class="separator:a834b9529f28b15ebe6dafadd97afaa88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1609131ddde43d43f6720dafc99b3006"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_s_a_h_g_p_u_node.html">SAHGPUNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a1609131ddde43d43f6720dafc99b3006">tree</a></td></tr>
<tr class="separator:a1609131ddde43d43f6720dafc99b3006"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7744a3770cbd876df2a5d66b82f9e8bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_a_a_b_b.html">AABB</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a7744a3770cbd876df2a5d66b82f9e8bf">boxes</a></td></tr>
<tr class="separator:a7744a3770cbd876df2a5d66b82f9e8bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b48957edffe8db43cbbd879386ee9c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_camera.html">Camera</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a8b48957edffe8db43cbbd879386ee9c5">camera</a></td></tr>
<tr class="separator:a8b48957edffe8db43cbbd879386ee9c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add715df9f1bb9fdc93ae7b3a44394157"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#add715df9f1bb9fdc93ae7b3a44394157">numLights</a></td></tr>
<tr class="separator:add715df9f1bb9fdc93ae7b3a44394157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa21fc3f18b242545c253a6942a581a06"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#aa21fc3f18b242545c253a6942a581a06">size</a></td></tr>
<tr class="separator:aa21fc3f18b242545c253a6942a581a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e28ea153d543adeee722455f6106e0c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_scene.html#a4e28ea153d543adeee722455f6106e0c">numSurfels</a></td></tr>
<tr class="separator:a4e28ea153d543adeee722455f6106e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a81528c87df5d4f3ba6d9625643bf9685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81528c87df5d4f3ba6d9625643bf9685">&#9670;&nbsp;</a></span>Scene()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__device__ Scene::Scene </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_light.html">Light</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_camera.html">Camera</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_surfel.html">Surfel</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_s_a_h_g_p_u_node.html">SAHGPUNode</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_a_a_b_b.html">AABB</a> *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Rope *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Primary constructor for the <a class="el" href="class_scene.html">Scene</a> class</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">l</td><td>pointer to the array of lights in the scene. Should be in device memory </td></tr>
    <tr><td class="paramname">nl</td><td>number of lights in the scene </td></tr>
    <tr><td class="paramname">c</td><td>camera object, also stored in device memory </td></tr>
    <tr><td class="paramname">s</td><td>pointer to array of surfels in the scene </td></tr>
    <tr><td class="paramname">t</td><td>flattened <a class="el" href="class_s_a_h_tree.html">SAHTree</a>, can be stored in unified or device memory </td></tr>
    <tr><td class="paramname">b</td><td>AABBs corresponding to flattened tree, can be stored in unified or device memory </td></tr>
    <tr><td class="paramname">r</td><td>Rope objects corresponding to flattened tree </td></tr>
    <tr><td class="paramname">sz</td><td>size of the flattened array </td></tr>
    <tr><td class="paramname">ns</td><td>size of the surfel array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2ee8a768beef00984e19ce82b46298f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ee8a768beef00984e19ce82b46298f1">&#9670;&nbsp;</a></span>intersectTree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__device__ bool Scene::intersectTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_hit_rec.html">HitRec</a> &amp;&#160;</td>
          <td class="paramname"><em>rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_ray.html">Ray</a> &amp;&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_surfel.html">Surfel</a> &amp;&#160;</td>
          <td class="paramname"><em>surf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>t_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>t_exit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isFrame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function calculates the nearest surfel a ray intersects, and then computes a normal vector and a hit position based on the sum of gaussians given in the Adamson-Alexa surface model, according to the Wald-Seidel ray-marching optimization.</p>
<p><b>[Interactive]</b> Ray-tracing of Point-based Models} <b>[Stackless]</b> KD-Tree Traversal for High Performance GPU Ray-Tracing} </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rec</td><td>the hit record. Stores the normal, hitPos, and hitT </td></tr>
    <tr><td class="paramname">r</td><td>the ray being cast into the scene </td></tr>
    <tr><td class="paramname">surf</td><td>the surfel the ray hits </td></tr>
    <tr><td class="paramname">t_entry</td><td>the parametric entry point of the ray. this lies exactly on one face of the scenes outermost bounding box </td></tr>
    <tr><td class="paramname">t_exit</td><td>the parametric exit point of the ray, this lies on the opposite face as t_entry </td></tr>
    <tr><td class="paramname">isFrame</td><td>a bool used to determine if the program is meant to only render a single frame. Used in debugging, omitted in release build </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8f1a46bda4ed8be9416308dd94288309"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f1a46bda4ed8be9416308dd94288309">&#9670;&nbsp;</a></span>lineOfSight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__device__ bool Scene::lineOfSight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_ray.html">Ray</a> &amp;&#160;</td>
          <td class="paramname"><em>toLight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>lightT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Shadow ray calculation. Returns false if the point is in shadow. Much of the code is similar to intersectTree, but as an optimization instead of checking for the closest ray hit, we check for the first ray hit and return at that point</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toLight</td><td>the ray to check </td></tr>
    <tr><td class="paramname">lightT</td><td>the parametric value of the ray which gives the origin. Typically this is the hitT of a ray that has hit an object already </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7744a3770cbd876df2a5d66b82f9e8bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7744a3770cbd876df2a5d66b82f9e8bf">&#9670;&nbsp;</a></span>boxes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_a_b_b.html">AABB</a>* Scene::boxes</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8b48957edffe8db43cbbd879386ee9c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b48957edffe8db43cbbd879386ee9c5">&#9670;&nbsp;</a></span>camera</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_camera.html">Camera</a>* Scene::camera</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9dc89f9d14a78b3449d8b00d1ac5752a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dc89f9d14a78b3449d8b00d1ac5752a">&#9670;&nbsp;</a></span>lights</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_light.html">Light</a>* Scene::lights</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="add715df9f1bb9fdc93ae7b3a44394157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add715df9f1bb9fdc93ae7b3a44394157">&#9670;&nbsp;</a></span>numLights</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Scene::numLights</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4e28ea153d543adeee722455f6106e0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e28ea153d543adeee722455f6106e0c">&#9670;&nbsp;</a></span>numSurfels</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Scene::numSurfels</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a834b9529f28b15ebe6dafadd97afaa88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a834b9529f28b15ebe6dafadd97afaa88">&#9670;&nbsp;</a></span>ropes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Rope* Scene::ropes</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa21fc3f18b242545c253a6942a581a06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa21fc3f18b242545c253a6942a581a06">&#9670;&nbsp;</a></span>size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Scene::size</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adbea41c68710d455664007e28d502980"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbea41c68710d455664007e28d502980">&#9670;&nbsp;</a></span>surfels</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_surfel.html">Surfel</a>* Scene::surfels</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1609131ddde43d43f6720dafc99b3006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1609131ddde43d43f6720dafc99b3006">&#9670;&nbsp;</a></span>tree</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_s_a_h_g_p_u_node.html">SAHGPUNode</a>* Scene::tree</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="scene_8h_source.html">scene.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
